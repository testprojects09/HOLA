{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/ederivc/Documents/NEWHEROKU/frontend/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/ederivc/Documents/NEWHEROKU/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:/Users/ederivc/Documents/NEWHEROKU/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{createContext,useEffect}from\"react\";import{useState}from\"react\";import{jsx as _jsx}from\"react/jsx-runtime\";export var AuthContext=/*#__PURE__*/createContext();var AuthProvider=function AuthProvider(_ref){var children=_ref.children;var _useState=useState(),_useState2=_slicedToArray(_useState,2),user=_useState2[0],setUser=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),sidebar=_useState4[0],setSidebar=_useState4[1];var showSidebar=function showSidebar(){setSidebar(!sidebar);};var checkSession=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response,json;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return fetch(\"/auth/session\",{method:\"GET\",headers:{\"Content-Type\":\"application/json\"// \"X-CSRFToken\": csrfToken,\n}});case 2:response=_context.sent;_context.next=5;return response.json();case 5:json=_context.sent;if(!json.email){setUser(\"\");}else{setUser(json);}case 7:case\"end\":return _context.stop();}}},_callee);}));return function checkSession(){return _ref2.apply(this,arguments);};}();useEffect(function(){checkSession();},[]);var isLogged=function isLogged(){return!!user;};var contextValue={user:user,setUser:setUser,isLogged:isLogged,sidebar:sidebar,showSidebar:showSidebar,checkSession:checkSession};return/*#__PURE__*/ (// <h1>jjkjlk</h1>\n_jsx(AuthContext.Provider,{value:contextValue,children:children}));};export default AuthProvider;","map":{"version":3,"sources":["C:/Users/ederivc/Documents/NEWHEROKU/frontend/src/auth/AuthProvider.jsx"],"names":["createContext","useEffect","useState","AuthContext","AuthProvider","children","user","setUser","sidebar","setSidebar","showSidebar","checkSession","fetch","method","headers","response","json","email","isLogged","contextValue"],"mappings":"6XAAA,OAASA,aAAT,CAAwBC,SAAxB,KAAyC,OAAzC,CACA,OAASC,QAAT,KAAyB,OAAzB,C,2CAEA,MAAO,IAAMC,CAAAA,WAAW,cAAGH,aAAa,EAAjC,CAEP,GAAMI,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,MAAkB,IAAfC,CAAAA,QAAe,MAAfA,QAAe,CACrC,cAAwBH,QAAQ,EAAhC,wCAAOI,IAAP,eAAaC,OAAb,eACA,eAA8BL,QAAQ,CAAC,KAAD,CAAtC,yCAAOM,OAAP,eAAgBC,UAAhB,eAEA,GAAMC,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,EAAM,CACxBD,UAAU,CAAC,CAACD,OAAF,CAAV,CACD,CAFD,CAIA,GAAMG,CAAAA,YAAY,2FAAG,2KACIC,CAAAA,KAAK,CAAC,eAAD,CAAkB,CAC5CC,MAAM,CAAE,KADoC,CAE5CC,OAAO,CAAE,CACP,eAAgB,kBAChB;AAFO,CAFmC,CAAlB,CADT,QACbC,QADa,qCAQAA,CAAAA,QAAQ,CAACC,IAAT,EARA,QAQbA,IARa,eASnB,GAAI,CAACA,IAAI,CAACC,KAAV,CAAiB,CACfV,OAAO,CAAC,EAAD,CAAP,CACD,CAFD,IAEO,CACLA,OAAO,CAACS,IAAD,CAAP,CACD,CAbkB,sDAAH,kBAAZL,CAAAA,YAAY,2CAAlB,CAgBAV,SAAS,CAAC,UAAM,CACdU,YAAY,GACb,CAFQ,CAEN,EAFM,CAAT,CAIA,GAAMO,CAAAA,QAAQ,CAAG,QAAXA,CAAAA,QAAW,SAAM,CAAC,CAACZ,IAAR,EAAjB,CAEA,GAAMa,CAAAA,YAAY,CAAG,CACnBb,IAAI,CAAJA,IADmB,CAEnBC,OAAO,CAAPA,OAFmB,CAGnBW,QAAQ,CAARA,QAHmB,CAInBV,OAAO,CAAPA,OAJmB,CAKnBE,WAAW,CAAXA,WALmB,CAMnBC,YAAY,CAAZA,YANmB,CAArB,CASA,oBACE;AACA,KAAC,WAAD,CAAa,QAAb,EAAsB,KAAK,CAAEQ,YAA7B,UAA4Cd,QAA5C,EAFF,EAID,CA3CD,CA6CA,cAAeD,CAAAA,YAAf","sourcesContent":["import { createContext, useEffect } from \"react\";\r\nimport { useState } from \"react\";\r\n\r\nexport const AuthContext = createContext();\r\n\r\nconst AuthProvider = ({ children }) => {\r\n  const [user, setUser] = useState();\r\n  const [sidebar, setSidebar] = useState(false);\r\n\r\n  const showSidebar = () => {\r\n    setSidebar(!sidebar);\r\n  };\r\n\r\n  const checkSession = async () => {\r\n    const response = await fetch(\"/auth/session\", {\r\n      method: \"GET\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n        // \"X-CSRFToken\": csrfToken,\r\n      },\r\n    });\r\n    const json = await response.json();\r\n    if (!json.email) {\r\n      setUser(\"\");\r\n    } else {\r\n      setUser(json);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    checkSession();\r\n  }, []);\r\n\r\n  const isLogged = () => !!user;\r\n\r\n  const contextValue = {\r\n    user,\r\n    setUser,\r\n    isLogged,\r\n    sidebar,\r\n    showSidebar,\r\n    checkSession,\r\n  };\r\n\r\n  return (\r\n    // <h1>jjkjlk</h1>\r\n    <AuthContext.Provider value={contextValue}>{children}</AuthContext.Provider>\r\n  );\r\n};\r\n\r\nexport default AuthProvider;\r\n"]},"metadata":{},"sourceType":"module"}