{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/ederivc/Documents/NEWHEROKU/frontend/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/ederivc/Documents/NEWHEROKU/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:/Users/ederivc/Documents/NEWHEROKU/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useContext,useEffect,useState}from\"react\";import{Button,Card,Col,Container,Row}from\"react-bootstrap\";import{SidebarContext}from\"../../components/BaseAccountPage\";import{Alerts,CustomModal,ModalDelete}from\"../../components/FormUtilities\";import{NotFound}from\"../../components/AccountUtilities\";import styles from\"./AccountPage.module.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var CitaAccountPage=function CitaAccountPage(){var _useState=useState(),_useState2=_slicedToArray(_useState,2),appointment=_useState2[0],setAppointment=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),hasLoaded=_useState4[0],setHasLoaded=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),show=_useState6[0],setShow=_useState6[1];var _useState7=useState(),_useState8=_slicedToArray(_useState7,2),pickAppointment=_useState8[0],setPickAppointment=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),deleteAppointment=_useState10[0],setDeleteAppointment=_useState10[1];var _useState11=useState(),_useState12=_slicedToArray(_useState11,2),alert=_useState12[0],setAlert=_useState12[1];var _useState13=useState(),_useState14=_slicedToArray(_useState13,2),alertMsg=_useState14[0],setAlertMsg=_useState14[1];var _useState15=useState(),_useState16=_slicedToArray(_useState15,2),alertVariant=_useState16[0],setAlertVariant=_useState16[1];var _useContext=useContext(SidebarContext),sidebar=_useContext.sidebar,setSidebar=_useContext.setSidebar;var handleShow=function handleShow(appointmentID){setShow(!show);setPickAppointment(appointmentID);};var handleDelete=function handleDelete(appointmentID){setDeleteAppointment(!deleteAppointment);setPickAppointment(appointmentID);};var fetchAppointments=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response,json;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return fetch(\"/citas/getAppointment\");case 2:response=_context.sent;_context.next=5;return response.json();case 5:json=_context.sent;setAppointment(json);if(Object.keys(json).length===0){setHasLoaded(false);}else{setHasLoaded(true);}case 8:case\"end\":return _context.stop();}}},_callee);}));return function fetchAppointments(){return _ref.apply(this,arguments);};}();useEffect(function(){fetchAppointments();setSidebar(true);},[setSidebar,pickAppointment]);return/*#__PURE__*/_jsxs(Container,{fluid:true,className:styles.citasContAcc,children:[/*#__PURE__*/_jsx(\"h1\",{className:sidebar?\"col-md-8 ml-sm-auto col-lg-9 col-xl-10 p-0 \".concat(styles.title):\"\".concat(styles.title,\" col-12 p-0\"),children:\"Citas\"}),alert?Alerts(alertMsg,alertVariant):null,/*#__PURE__*/_jsxs(Row,{className:sidebar?\"col-md-9 ml-sm-auto col-lg-10 col-xl-10 p-0 \".concat(styles.infoContainer):\"\".concat(styles.infoContainer,\" col-12 p-0\"),children:[hasLoaded?Object.keys(appointment).map(function(i,cont){return/*#__PURE__*/_jsx(Col,{md:4,className:\"p-2\",children:/*#__PURE__*/_jsxs(Card,{className:styles.card,children:[/*#__PURE__*/_jsx(Card.Header,{children:\"Cita: \".concat(cont+1)}),/*#__PURE__*/_jsxs(Card.Body,{children:[/*#__PURE__*/_jsxs(Card.Title,{className:\"font-weight-bold\",children:[\"Cita:\",\" \",/*#__PURE__*/_jsx(\"span\",{className:\"font-weight-normal\",children:appointment[i].appointment_id})]}),/*#__PURE__*/_jsxs(Card.Text,{className:\"font-weight-bold\",children:[\"Fecha y hora: \",/*#__PURE__*/_jsx(\"span\",{className:\"font-weight-normal\",children:appointment[i].appointment_date})]}),/*#__PURE__*/_jsxs(Card.Text,{className:\"font-weight-bold\",children:[\"Descripci\\xF3n: \",/*#__PURE__*/_jsx(\"span\",{className:\"font-weight-normal\",children:appointment[i].descripcion})]}),/*#__PURE__*/_jsxs(Card.Text,{className:\"font-weight-bold\",children:[\"Estado de la cita: \",/*#__PURE__*/_jsx(\"span\",{className:\"font-weight-normal\",children:appointment[i].approved===1?\"Aprobada\":\"Pendiente\"})]})]}),/*#__PURE__*/_jsxs(Row,{className:styles.rowContainer,children:[/*#__PURE__*/_jsx(Button,{variant:\"warning\",size:\"lg\",onClick:function onClick(){return handleShow(appointment[i]);},disabled:appointment[i].approved===1?true:false,children:\"Editar\"}),/*#__PURE__*/_jsx(Button,{variant:\"danger\",size:\"lg\",onClick:function onClick(){return handleDelete(appointment[i]);},disabled:appointment[i].approved===1?true:false,children:\"Eliminar\"})]})]})},appointment[i].appointment_id);}):/*#__PURE__*/_jsx(NotFound,{title:\"Secci\\xF3n vacia\",text:\"A\\xFAn no cuentas con ninguna cita, dirigete a la secci\\xF3n de citas para agendar una\"}),show?/*#__PURE__*/_jsx(CustomModal,{show:show,handleClose:handleShow,appointments:appointment,pickAppointment:pickAppointment,setAlert:setAlert,setAlertMsg:setAlertMsg,setAlertVariant:setAlertVariant}):null,deleteAppointment?/*#__PURE__*/_jsx(ModalDelete,{show:deleteAppointment,handleClose:handleDelete,pickAppointment:pickAppointment,setAlert:setAlert,setAlertMsg:setAlertMsg,setAlertVariant:setAlertVariant}):null]})]});};export default CitaAccountPage;","map":{"version":3,"sources":["C:/Users/ederivc/Documents/NEWHEROKU/frontend/src/pages/AccountPage/CitaAccountPage.jsx"],"names":["React","useContext","useEffect","useState","Button","Card","Col","Container","Row","SidebarContext","Alerts","CustomModal","ModalDelete","NotFound","styles","CitaAccountPage","appointment","setAppointment","hasLoaded","setHasLoaded","show","setShow","pickAppointment","setPickAppointment","deleteAppointment","setDeleteAppointment","alert","setAlert","alertMsg","setAlertMsg","alertVariant","setAlertVariant","sidebar","setSidebar","handleShow","appointmentID","handleDelete","fetchAppointments","fetch","response","json","Object","keys","length","citasContAcc","title","infoContainer","map","i","cont","card","appointment_id","appointment_date","descripcion","approved","rowContainer"],"mappings":"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","sourcesContent":["import React, { useContext, useEffect, useState } from \"react\";\r\nimport { Button, Card, Col, Container, Row } from \"react-bootstrap\";\r\nimport { SidebarContext } from \"../../components/BaseAccountPage\";\r\nimport {\r\n  Alerts,\r\n  CustomModal,\r\n  ModalDelete,\r\n} from \"../../components/FormUtilities\";\r\nimport { NotFound } from \"../../components/AccountUtilities\";\r\nimport styles from \"./AccountPage.module.css\";\r\n\r\nconst CitaAccountPage = () => {\r\n  const [appointment, setAppointment] = useState();\r\n  const [hasLoaded, setHasLoaded] = useState();\r\n  const [show, setShow] = useState(false);\r\n  const [pickAppointment, setPickAppointment] = useState();\r\n  const [deleteAppointment, setDeleteAppointment] = useState(false);\r\n\r\n  const [alert, setAlert] = useState();\r\n  const [alertMsg, setAlertMsg] = useState();\r\n  const [alertVariant, setAlertVariant] = useState();\r\n\r\n  const { sidebar, setSidebar } = useContext(SidebarContext);\r\n\r\n  const handleShow = (appointmentID) => {\r\n    setShow(!show);\r\n    setPickAppointment(appointmentID);\r\n  };\r\n\r\n  const handleDelete = (appointmentID) => {\r\n    setDeleteAppointment(!deleteAppointment);\r\n    setPickAppointment(appointmentID);\r\n  };\r\n\r\n  const fetchAppointments = async () => {\r\n    const response = await fetch(\"/citas/getAppointment\");\r\n    const json = await response.json();\r\n    setAppointment(json);\r\n    if (Object.keys(json).length === 0) {\r\n      setHasLoaded(false);\r\n    } else {\r\n      setHasLoaded(true);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchAppointments();\r\n    setSidebar(true);\r\n  }, [setSidebar, pickAppointment]);\r\n\r\n  return (\r\n    <Container fluid className={styles.citasContAcc}>\r\n      <h1\r\n        className={\r\n          sidebar\r\n            ? `col-md-8 ml-sm-auto col-lg-9 col-xl-10 p-0 ${styles.title}`\r\n            : `${styles.title} col-12 p-0`\r\n        }\r\n      >\r\n        Citas\r\n      </h1>\r\n      {alert ? Alerts(alertMsg, alertVariant) : null}\r\n      <Row\r\n        className={\r\n          sidebar\r\n            ? `col-md-9 ml-sm-auto col-lg-10 col-xl-10 p-0 ${styles.infoContainer}`\r\n            : `${styles.infoContainer} col-12 p-0`\r\n        }\r\n      >\r\n        {hasLoaded ? (\r\n          Object.keys(appointment).map((i, cont) => {\r\n            return (\r\n              <Col md={4} className=\"p-2\" key={appointment[i].appointment_id}>\r\n                <Card className={styles.card}>\r\n                  <Card.Header>{`Cita: ${cont + 1}`}</Card.Header>\r\n                  <Card.Body>\r\n                    <Card.Title className=\"font-weight-bold\">\r\n                      {`Cita:`}{\" \"}\r\n                      <span className=\"font-weight-normal\">\r\n                        {appointment[i].appointment_id}\r\n                      </span>\r\n                    </Card.Title>\r\n                    <Card.Text className=\"font-weight-bold\">\r\n                      {`Fecha y hora: `}\r\n                      <span className=\"font-weight-normal\">\r\n                        {appointment[i].appointment_date}\r\n                      </span>\r\n                    </Card.Text>\r\n                    <Card.Text className=\"font-weight-bold\">\r\n                      {`Descripción: `}\r\n                      <span className=\"font-weight-normal\">\r\n                        {appointment[i].descripcion}\r\n                      </span>\r\n                    </Card.Text>\r\n                    <Card.Text className=\"font-weight-bold\">\r\n                      {`Estado de la cita: `}\r\n                      <span className=\"font-weight-normal\">\r\n                        {appointment[i].approved === 1\r\n                          ? \"Aprobada\"\r\n                          : \"Pendiente\"}\r\n                      </span>\r\n                    </Card.Text>\r\n                  </Card.Body>\r\n                  <Row className={styles.rowContainer}>\r\n                    <Button\r\n                      variant=\"warning\"\r\n                      size=\"lg\"\r\n                      onClick={() => handleShow(appointment[i])}\r\n                      disabled={appointment[i].approved === 1 ? true : false}\r\n                    >\r\n                      Editar\r\n                    </Button>\r\n                    <Button\r\n                      variant=\"danger\"\r\n                      size=\"lg\"\r\n                      onClick={() => handleDelete(appointment[i])}\r\n                      disabled={appointment[i].approved === 1 ? true : false}\r\n                    >\r\n                      Eliminar\r\n                    </Button>\r\n                  </Row>\r\n                </Card>\r\n              </Col>\r\n            );\r\n          })\r\n        ) : (\r\n          <NotFound\r\n            title=\"Sección vacia\"\r\n            text=\"Aún no cuentas con ninguna cita, dirigete a la sección de citas para agendar una\"\r\n          />\r\n        )}\r\n        {show ? (\r\n          <CustomModal\r\n            show={show}\r\n            handleClose={handleShow}\r\n            appointments={appointment}\r\n            pickAppointment={pickAppointment}\r\n            setAlert={setAlert}\r\n            setAlertMsg={setAlertMsg}\r\n            setAlertVariant={setAlertVariant}\r\n          />\r\n        ) : null}\r\n        {deleteAppointment ? (\r\n          <ModalDelete\r\n            show={deleteAppointment}\r\n            handleClose={handleDelete}\r\n            pickAppointment={pickAppointment}\r\n            setAlert={setAlert}\r\n            setAlertMsg={setAlertMsg}\r\n            setAlertVariant={setAlertVariant}\r\n          />\r\n        ) : null}\r\n      </Row>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default CitaAccountPage;\r\n"]},"metadata":{},"sourceType":"module"}