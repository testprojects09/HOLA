{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/ederivc/Documents/NEWHEROKU/frontend/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/ederivc/Documents/NEWHEROKU/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:/Users/ederivc/Documents/NEWHEROKU/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from\"react\";import{Container,Table}from\"react-bootstrap\";import{Alerts}from\"../../../../../components/FormUtilities\";import{ModalRemoveCita,ModalApprovedCita}from\"./CitasUtilities\";import styles from\"./GestionCitas.module.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var GestionCitas=function GestionCitas(){var _useState=useState(),_useState2=_slicedToArray(_useState,2),citas=_useState2[0],setCitas=_useState2[1];// const [show, setShow] = useState(false);\nvar _useState3=useState(),_useState4=_slicedToArray(_useState3,2),selectedCitas=_useState4[0],setSelectedCitas=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),deleteCitas=_useState6[0],setDeleteCitas=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),approvedCitas=_useState8[0],setApprovedCitas=_useState8[1];var _useState9=useState(),_useState10=_slicedToArray(_useState9,2),alert=_useState10[0],setAlert=_useState10[1];var _useState11=useState(),_useState12=_slicedToArray(_useState11,2),alertMsg=_useState12[0],setAlertMsg=_useState12[1];var _useState13=useState(),_useState14=_slicedToArray(_useState13,2),alertVariant=_useState14[0],setAlertVariant=_useState14[1];// const handleShow = (cita) => {\n//   setShow(!show);\n//   setSelectedCitas(cita);\n// };\nvar handleDelete=function handleDelete(cita){setDeleteCitas(!deleteCitas);setSelectedCitas(cita);};var handleApprove=function handleApprove(cita){setApprovedCitas(!approvedCitas);setSelectedCitas(cita);};var getCitas=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var res,json;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return fetch(\"/citas/getUserCita\");case 2:res=_context.sent;_context.next=5;return res.json();case 5:json=_context.sent;setCitas(json);case 7:case\"end\":return _context.stop();}}},_callee);}));return function getCitas(){return _ref.apply(this,arguments);};}();useEffect(function(){getCitas();},[deleteCitas,approvedCitas]);return/*#__PURE__*/ (// <div className={styles.wrapper}>\n_jsxs(Container,{fluid:true,className:styles.container,children:[/*#__PURE__*/_jsx(\"h1\",{className:styles.title,children:\"Citas Pendientes\"}),/*#__PURE__*/_jsxs(\"div\",{className:styles.tableCont,children:[alert?Alerts(alertMsg,alertVariant,setAlert):null,/*#__PURE__*/_jsxs(Table,{striped:true,className:\"\",responsive:true,children:[/*#__PURE__*/_jsx(\"thead\",{className:styles.tableHead,children:/*#__PURE__*/_jsxs(\"tr\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"th\",{children:\"ID Cita\"}),/*#__PURE__*/_jsx(\"th\",{children:\"ID Usuario\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Nombre del Usuario\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Email del Usuario\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Fecha de la Cita\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Descripci\\xF3n\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Modificar\"})]})}),/*#__PURE__*/_jsxs(\"tbody\",{children:[citas?Object.keys(citas).map(function(item){var _citas$item$guest_id,_citas$item$guest_nam,_citas$item$guest_ema;return/*#__PURE__*/_jsxs(\"tr\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"td\",{children:citas[item].appointment_id}),/*#__PURE__*/_jsx(\"td\",{children:(_citas$item$guest_id=citas[item].guest_id)!==null&&_citas$item$guest_id!==void 0?_citas$item$guest_id:citas[item].user_id}),/*#__PURE__*/_jsx(\"td\",{children:(_citas$item$guest_nam=citas[item].guest_name)!==null&&_citas$item$guest_nam!==void 0?_citas$item$guest_nam:citas[item].user_name}),/*#__PURE__*/_jsx(\"td\",{children:(_citas$item$guest_ema=citas[item].guest_email)!==null&&_citas$item$guest_ema!==void 0?_citas$item$guest_ema:citas[item].user_email}),/*#__PURE__*/_jsx(\"td\",{children:citas[item].appointment_date}),/*#__PURE__*/_jsx(\"td\",{children:citas[item].descripcion}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsxs(\"div\",{className:styles.btnContainer,children:[/*#__PURE__*/_jsx(\"div\",{className:styles.checkIcon,onClick:function onClick(){return handleApprove(citas[item]);},children:/*#__PURE__*/_jsx(\"i\",{className:\"bx bxs-check-circle\"})}),/*#__PURE__*/_jsx(\"div\",{className:styles.deleteIcon,onClick:function onClick(){return handleDelete(citas[item]);},children:/*#__PURE__*/_jsx(\"i\",{className:\"bx bxs-trash-alt\"})})]})})]},citas[item].appointment_id);}):/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"td\",{children:\"Loading\"})}),approvedCitas?/*#__PURE__*/_jsx(ModalApprovedCita,{show:approvedCitas,handleClose:handleApprove,selectedCita:selectedCitas,setAlert:setAlert,setAlertMsg:setAlertMsg,setAlertVariant:setAlertVariant}):null,deleteCitas?/*#__PURE__*/_jsx(ModalRemoveCita,{show:deleteCitas,handleClose:handleDelete,selectedCita:selectedCitas,setAlert:setAlert,setAlertMsg:setAlertMsg,setAlertVariant:setAlertVariant,message:\"Est\\xE1 seguro que desea eliminar la cita y notificar al usuario de dicha acci\\xF3n\",messageAlert:\"Cita eliminada y notificaci\\xF3n enviada al usuario.\"}):null]})]})]})]})// </div>\n);};export default GestionCitas;","map":{"version":3,"sources":["C:/Users/ederivc/Documents/NEWHEROKU/frontend/src/pages/AccountPage/Admin/Gestion/Citas/GestionCitas.jsx"],"names":["React","useEffect","useState","Container","Table","Alerts","ModalRemoveCita","ModalApprovedCita","styles","GestionCitas","citas","setCitas","selectedCitas","setSelectedCitas","deleteCitas","setDeleteCitas","approvedCitas","setApprovedCitas","alert","setAlert","alertMsg","setAlertMsg","alertVariant","setAlertVariant","handleDelete","cita","handleApprove","getCitas","fetch","res","json","container","title","tableCont","tableHead","Object","keys","map","item","appointment_id","guest_id","user_id","guest_name","user_name","guest_email","user_email","appointment_date","descripcion","btnContainer","checkIcon","deleteIcon"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { Container, Table } from \"react-bootstrap\";\r\nimport { Alerts } from \"../../../../../components/FormUtilities\";\r\nimport { ModalRemoveCita, ModalApprovedCita } from \"./CitasUtilities\";\r\nimport styles from \"./GestionCitas.module.css\";\r\n\r\nconst GestionCitas = () => {\r\n  const [citas, setCitas] = useState();\r\n\r\n  // const [show, setShow] = useState(false);\r\n  const [selectedCitas, setSelectedCitas] = useState();\r\n  const [deleteCitas, setDeleteCitas] = useState(false);\r\n  const [approvedCitas, setApprovedCitas] = useState(false);\r\n\r\n  const [alert, setAlert] = useState();\r\n  const [alertMsg, setAlertMsg] = useState();\r\n  const [alertVariant, setAlertVariant] = useState();\r\n\r\n  // const handleShow = (cita) => {\r\n  //   setShow(!show);\r\n  //   setSelectedCitas(cita);\r\n  // };\r\n\r\n  const handleDelete = (cita) => {\r\n    setDeleteCitas(!deleteCitas);\r\n    setSelectedCitas(cita);\r\n  };\r\n\r\n  const handleApprove = (cita) => {\r\n    setApprovedCitas(!approvedCitas);\r\n    setSelectedCitas(cita);\r\n  };\r\n\r\n  const getCitas = async () => {\r\n    const res = await fetch(\"/citas/getUserCita\");\r\n    const json = await res.json();\r\n    setCitas(json);\r\n  };\r\n\r\n  useEffect(() => {\r\n    getCitas();\r\n  }, [deleteCitas, approvedCitas]);\r\n\r\n  return (\r\n    // <div className={styles.wrapper}>\r\n    <Container fluid className={styles.container}>\r\n      <h1 className={styles.title}>Citas Pendientes</h1>\r\n      <div className={styles.tableCont}>\r\n        {alert ? Alerts(alertMsg, alertVariant, setAlert) : null}\r\n        <Table striped className=\"\" responsive>\r\n          <thead className={styles.tableHead}>\r\n            <tr className=\"text-center\">\r\n              <th>ID Cita</th>\r\n              <th>ID Usuario</th>\r\n              <th>Nombre del Usuario</th>\r\n              <th>Email del Usuario</th>\r\n              <th>Fecha de la Cita</th>\r\n              <th>Descripción</th>\r\n              <th>Modificar</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {citas ? (\r\n              Object.keys(citas).map((item) => {\r\n                return (\r\n                  <tr className=\"text-center\" key={citas[item].appointment_id}>\r\n                    <td>{citas[item].appointment_id}</td>\r\n                    <td>{citas[item].guest_id ?? citas[item].user_id}</td>\r\n                    <td>{citas[item].guest_name ?? citas[item].user_name}</td>\r\n                    <td>{citas[item].guest_email ?? citas[item].user_email}</td>\r\n                    <td>{citas[item].appointment_date}</td>\r\n                    <td>{citas[item].descripcion}</td>\r\n                    <td>\r\n                      <div className={styles.btnContainer}>\r\n                        <div\r\n                          className={styles.checkIcon}\r\n                          onClick={() => handleApprove(citas[item])}\r\n                        >\r\n                          <i className=\"bx bxs-check-circle\"></i>\r\n                        </div>\r\n                        <div\r\n                          className={styles.deleteIcon}\r\n                          onClick={() => handleDelete(citas[item])}\r\n                        >\r\n                          <i className=\"bx bxs-trash-alt\"></i>\r\n                        </div>\r\n                      </div>\r\n                    </td>\r\n                  </tr>\r\n                );\r\n              })\r\n            ) : (\r\n              <tr>\r\n                <td>Loading</td>\r\n              </tr>\r\n            )}\r\n            {approvedCitas ? (\r\n              <ModalApprovedCita\r\n                show={approvedCitas}\r\n                handleClose={handleApprove}\r\n                selectedCita={selectedCitas}\r\n                setAlert={setAlert}\r\n                setAlertMsg={setAlertMsg}\r\n                setAlertVariant={setAlertVariant}\r\n              />\r\n            ) : null}\r\n            {deleteCitas ? (\r\n              <ModalRemoveCita\r\n                show={deleteCitas}\r\n                handleClose={handleDelete}\r\n                selectedCita={selectedCitas}\r\n                setAlert={setAlert}\r\n                setAlertMsg={setAlertMsg}\r\n                setAlertVariant={setAlertVariant}\r\n                message=\"Está seguro que desea eliminar la cita y notificar al usuario de dicha acción\"\r\n                messageAlert=\"Cita eliminada y notificación enviada al usuario.\"\r\n              />\r\n            ) : null}\r\n          </tbody>\r\n        </Table>\r\n      </div>\r\n    </Container>\r\n    // </div>\r\n  );\r\n};\r\n\r\nexport default GestionCitas;\r\n"]},"metadata":{},"sourceType":"module"}