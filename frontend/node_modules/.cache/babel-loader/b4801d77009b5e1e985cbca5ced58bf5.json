{"ast":null,"code":"import _toConsumableArray from\"C:/Users/ederivc/Documents/NEWHEROKU/frontend/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _regeneratorRuntime from\"C:/Users/ederivc/Documents/NEWHEROKU/frontend/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/ederivc/Documents/NEWHEROKU/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:/Users/ederivc/Documents/NEWHEROKU/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useContext,useEffect,useState}from\"react\";import{Container,Row,Col,Alert}from\"react-bootstrap\";import{IMG_URL}from\"../../api/api\";import{CartContext}from\"../../layouts/Layout\";import styles from\"./ProductsPage.module.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ProductsPage=function ProductsPage(){var _useState=useState(),_useState2=_slicedToArray(_useState,2),products=_useState2[0],setProducts=_useState2[1];var _useContext=useContext(CartContext),cart=_useContext.cart,setCart=_useContext.setCart,addedProduct=_useContext.addedProduct,setAddedProduct=_useContext.setAddedProduct,cartTotal=_useContext.cartTotal,setCartTotal=_useContext.setCartTotal;var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),alert=_useState4[0],setAlert=_useState4[1];var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),alertMsg=_useState6[0],setAlertMsg=_useState6[1];var _useState7=useState(),_useState8=_slicedToArray(_useState7,2),alertVariant=_useState8[0],setAlertVariant=_useState8[1];var getProducts=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var res,json;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return fetch(\"/products/getProducts\");case 2:res=_context.sent;_context.next=5;return res.json();case 5:json=_context.sent;setProducts(json);case 7:case\"end\":return _context.stop();}}},_callee);}));return function getProducts(){return _ref.apply(this,arguments);};}();var handleAlert=function handleAlert(msg,variant){setAlert(true);setAlertMsg(msg);setAlertVariant(variant);setTimeout(function(){setAlert(false);setAlertMsg(\"\");setAlertVariant(\"\");},2000);};var addProductCard=function addProductCard(product){setCart(cart+1);setCartTotal(cartTotal+product.price);setAddedProduct([product].concat(_toConsumableArray(addedProduct)));handleAlert(\"Producto agregado al carrito.\",\"success\");};useEffect(function(){getProducts();},[]);return/*#__PURE__*/_jsxs(Container,{fluid:true,className:styles.products,children:[/*#__PURE__*/_jsx(\"h1\",{className:styles.heading,children:\"Conoce Nuestros Productos\"}),/*#__PURE__*/_jsxs(Container,{fluid:true,className:styles.box_container,children:[alert?/*#__PURE__*/_jsx(Alert,{variant:alertVariant,className:\"w-75 mx-auto\",children:alertMsg}):null,/*#__PURE__*/_jsx(Row,{className:\"justify-content-md-center\",children:products?Object.keys(products).map(function(item){return/*#__PURE__*/_jsxs(Col,{lg:3,className:styles.box,children:[/*#__PURE__*/_jsx(\"img\",{src:\"\".concat(IMG_URL).concat(products[item].img),alt:\"producto\".concat(parseInt(item)+1)}),/*#__PURE__*/_jsxs(\"div\",{className:styles.content,children:[/*#__PURE__*/_jsx(\"div\",{className:styles.stars}),/*#__PURE__*/_jsx(\"h3\",{children:products[item].name}),products[item].descripcion,/*#__PURE__*/_jsxs(\"div\",{className:styles.price,children:[\"$\",products[item].price]}),/*#__PURE__*/_jsxs(\"div\",{className:styles.iconCont,children:[\"Agregar\",\" \",/*#__PURE__*/_jsx(\"i\",{className:\"bx bxs-cart\",onClick:function onClick(){return addProductCard(products[item]);}})]})]})]},products[item].product_id);}):console.log(\"Loading\")})]})]});};export default ProductsPage;","map":{"version":3,"sources":["C:/Users/ederivc/Documents/NEWHEROKU/frontend/src/pages/ProductsPage/ProductsPage.jsx"],"names":["React","useContext","useEffect","useState","Container","Row","Col","Alert","IMG_URL","CartContext","styles","ProductsPage","products","setProducts","cart","setCart","addedProduct","setAddedProduct","cartTotal","setCartTotal","alert","setAlert","alertMsg","setAlertMsg","alertVariant","setAlertVariant","getProducts","fetch","res","json","handleAlert","msg","variant","setTimeout","addProductCard","product","price","heading","box_container","Object","keys","map","item","box","img","parseInt","content","stars","name","descripcion","iconCont","product_id","console","log"],"mappings":"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","sourcesContent":["import React, { useContext, useEffect, useState } from \"react\";\r\nimport { Container, Row, Col, Alert } from \"react-bootstrap\";\r\nimport { IMG_URL } from \"../../api/api\";\r\nimport { CartContext } from \"../../layouts/Layout\";\r\nimport styles from \"./ProductsPage.module.css\";\r\n\r\nconst ProductsPage = () => {\r\n  const [products, setProducts] = useState();\r\n  const {\r\n    cart,\r\n    setCart,\r\n    addedProduct,\r\n    setAddedProduct,\r\n    cartTotal,\r\n    setCartTotal,\r\n  } = useContext(CartContext);\r\n\r\n  const [alert, setAlert] = useState();\r\n  const [alertMsg, setAlertMsg] = useState();\r\n  const [alertVariant, setAlertVariant] = useState();\r\n\r\n  const getProducts = async () => {\r\n    const res = await fetch(\"/products/getProducts\");\r\n    const json = await res.json();\r\n    setProducts(json);\r\n  };\r\n\r\n  const handleAlert = (msg, variant) => {\r\n    setAlert(true);\r\n    setAlertMsg(msg);\r\n    setAlertVariant(variant);\r\n    setTimeout(() => {\r\n      setAlert(false);\r\n      setAlertMsg(\"\");\r\n      setAlertVariant(\"\");\r\n    }, 2000);\r\n  };\r\n\r\n  const addProductCard = (product) => {\r\n    setCart(cart + 1);\r\n    setCartTotal(cartTotal + product.price);\r\n    setAddedProduct([product, ...addedProduct]);\r\n    handleAlert(\"Producto agregado al carrito.\", \"success\");\r\n  };\r\n\r\n  useEffect(() => {\r\n    getProducts();\r\n  }, []);\r\n\r\n  return (\r\n    <Container fluid className={styles.products}>\r\n      <h1 className={styles.heading}>Conoce Nuestros Productos</h1>\r\n      <Container fluid className={styles.box_container}>\r\n        {alert ? (\r\n          <Alert variant={alertVariant} className=\"w-75 mx-auto\">\r\n            {alertMsg}\r\n          </Alert>\r\n        ) : null}\r\n        <Row className=\"justify-content-md-center\">\r\n          {products\r\n            ? Object.keys(products).map((item) => {\r\n                return (\r\n                  <Col\r\n                    key={products[item].product_id}\r\n                    lg={3}\r\n                    className={styles.box}\r\n                  >\r\n                    <img\r\n                      src={`${IMG_URL}${products[item].img}`}\r\n                      alt={`producto${parseInt(item) + 1}`}\r\n                    />\r\n                    <div className={styles.content}>\r\n                      <div className={styles.stars}></div>\r\n                      <h3>{products[item].name}</h3>\r\n                      {products[item].descripcion}\r\n                      <div className={styles.price}>\r\n                        ${products[item].price}\r\n                      </div>\r\n                      <div className={styles.iconCont}>\r\n                        Agregar{\" \"}\r\n                        <i\r\n                          className=\"bx bxs-cart\"\r\n                          onClick={() => addProductCard(products[item])}\r\n                        ></i>\r\n                      </div>\r\n                    </div>\r\n                  </Col>\r\n                );\r\n              })\r\n            : console.log(\"Loading\")}\r\n        </Row>\r\n      </Container>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default ProductsPage;\r\n"]},"metadata":{},"sourceType":"module"}